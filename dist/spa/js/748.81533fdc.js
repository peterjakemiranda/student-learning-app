"use strict";(self["webpackChunklearning_app"]=self["webpackChunklearning_app"]||[]).push([[748],{6523:(e,t,s)=>{s.d(t,{Z:()=>C});var a=s(5474);const c=(e,{data:t})=>{e(t)},i=(e,t)=>{t(e)},n=e=>new Promise(((t,s)=>{a.axios.request({url:"/api/sections",data:e,method:"post"}).then((e=>{c(t,e)})).catch((e=>{i(e.response.data,s)}))})),o=(e,t)=>{t(e)},r=(e,t)=>{t(e)},l=(e,t)=>new Promise(((s,c)=>{a.axios.request({url:`/api/sections/${e}`,data:t,method:"put"}).then((e=>{o(e.data,s)})).catch((e=>{r(e.response.data,c)}))}));var u=s(8938),h=s(5314),d=s(3305);const p=({data:e},t,s)=>{const a=e,c=h.Z.fetch(e.pagination);u["default"].dispatch("fetchSections",{sections:a,pagination:c}),s({sections:a,pagination:c})},m=(e,t)=>t(e),g=(e={})=>new Promise(((t,s)=>{a.axios.get(d.Z.buildUrl("/api/sections",e)).then((s=>{p(s,e,t)})).catch((e=>{m(e,s)}))})),f=({data:e},t)=>{u["default"].dispatch("fetchAllSections",e),t(e)},w=(e,t)=>t(e),b=(e=null)=>new Promise(((t,s)=>{a.axios.get(null===e?"/api/sections":`/api/sections?course_id=${e}`).then((e=>{f(e,t)})).catch((e=>{w(e,s)}))})),x=(e,t)=>{t(e)},k=(e,t)=>{t(e)},_=e=>new Promise(((t,s)=>{a.axios.get(`/api/sections/${e}`).then((e=>{x(e.data,t)})).catch((e=>{k(e.response.data,s)}))})),q=({data:e},t)=>{u["default"].dispatch("fetchSearchResults",e),t(e)},y=(e,t)=>t(e),$=(e="")=>new Promise(((t,s)=>{a.axios.get(`/api/sections?search=${e}`).then((e=>{q(e,t)})).catch((e=>{y(e,s)}))})),T=(e,t,s)=>{b(s),t(e)},Z=(e,t)=>{t(e)},S=(e,t)=>new Promise(((s,c)=>{a.axios["delete"](`/api/sections/${e}`).then((e=>{T(e.data,s,t)})).catch((e=>{Z(e.response.data,c)}))})),C={store:n,update:l,items:g,all:b,show:_,search:$,destroy:S}},5314:(e,t,s)=>{s.d(t,{Z:()=>c});class a{static fetchCollection(e){return e.map((e=>this.fetch(e)))}static sendCollection(e){return e.map((e=>this.send(e)))}}class c extends a{static fetch(e){return{currentPage:e.current_page,lastPage:e.last_page,limit:e.limit,totalCount:e.total_count,counters:e.counters}}static send(e){return{current_page:e.currentPage,last_page:e.lastPage,limit:e.limit,total_count:e.totalCount}}}},3305:(e,t,s)=>{s.d(t,{Z:()=>a});const a={buildUrl(e,t){let s="?";const a=Object.keys(t).filter((e=>t[e]));return a.forEach(((e,c)=>{s+=`${e}=${t[e]}`,c<a.length-1&&(s+="&")})),`${e}${s}`},debounce(e,t){var s=null;return function(){clearTimeout(s);var a=arguments,c=this;s=setTimeout((function(){e.apply(c,a)}),t)}}}},6193:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Z});var a=s(3673),c=s(2323);const i={class:"q-pa-md"},n={class:"q-pt-lg"},o=(0,a.Uk)(" Search the entire learning "),r={key:0,class:"text-center"},l={key:2,class:"text-body2 text-center q-pa-lg text-grey-6"};function u(e,t,s,u,h,d){const p=(0,a.up)("q-breadcrumbs-el"),m=(0,a.up)("q-breadcrumbs"),g=(0,a.up)("q-page-sticky"),f=(0,a.up)("q-icon"),w=(0,a.up)("q-input"),b=(0,a.up)("q-spinner-bars"),x=(0,a.up)("q-item-label"),k=(0,a.up)("q-item-section"),_=(0,a.up)("q-item"),q=(0,a.up)("q-list");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(g,{expand:"",position:"top-left",class:"full-width",style:{"z-index":"1"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-grey bg-white full-width q-px-lg q-py-sm text-body1"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{to:"/",icon:"menu_book",label:"My Learning"}),(0,a.Wm)(p,{icon:"local_library",label:"Search"})])),_:1})])),_:1}),(0,a._)("div",n,[(0,a.Wm)(w,{"bottom-slots":"",filled:"",debounce:"800",modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchText=t),ref:"searchInput",dense:"",class:"q-pa-sm q-mb-lg"},{append:(0,a.w5)((()=>[""!==e.searchText?((0,a.wg)(),(0,a.j4)(f,{key:0,name:"close",onClick:e.clearSearch,class:"cursor-pointer"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(f,{name:"search"})])),hint:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),e.loading?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(b,{color:"primary",size:"2em"})])):e.sections.length?((0,a.wg)(),(0,a.j4)(q,{key:1,class:"q-pa-xs",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sections,(t=>((0,a.wg)(),(0,a.j4)(_,{to:`/course/${t.course_id}#section-${t.id}`,key:t.id},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{to:""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{class:"text-subtitle1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.titleCase(t.title)),1)])),_:2},1024),(0,a.Wm)(x,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.stripTags(t.content)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})):((0,a.wg)(),(0,a.iD)("div",l," No Results "))])])}s(5363);var h=s(7874),d=s(6523);const p=(0,a.aZ)({name:"Search",data(){return{loading:!1}},computed:{...(0,h.Se)({sections:"searchResults"}),searchText:{get(){return this.$store.state.section.searchText},set(e){this.$store.commit("SET_SEARCH_TEXT",e)}}},mounted(){this.$refs.searchInput.focus(),this.searchText||this.$store.dispatch("resetSections")},methods:{titleCase(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},stripTags(e){return e.replace(/<\/?[^>]+(>|$)/g,"").replace(/\&nbsp;/g,"")},clearSearch(){this.searchText="",this.$refs.searchInput.focus()}},watch:{searchText(){this.searchText?(this.loading=!0,d.Z.search(this.searchText).then((e=>{this.loading=!1})).catch((e=>{this.loading=!1}))):this.$store.dispatch("resetSections")}}});var m=s(1007),g=s(1481),f=s(5926),w=s(4842),b=s(4554),x=s(4752),k=s(7011),_=s(3414),q=s(2035),y=s(2350),$=s(7518),T=s.n($);p.render=u;const Z=p;T()(p,"components",{QPageSticky:m.Z,QBreadcrumbs:g.Z,QBreadcrumbsEl:f.Z,QInput:w.Z,QIcon:b.Z,QSpinnerBars:x.Z,QList:k.Z,QItem:_.Z,QItemSection:q.Z,QItemLabel:y.Z})}}]);