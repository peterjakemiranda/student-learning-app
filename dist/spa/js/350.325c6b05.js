"use strict";(self["webpackChunklearning_app"]=self["webpackChunklearning_app"]||[]).push([[350],{5350:(e,o,t)=>{t.r(o),t.d(o,{default:()=>H});t(246);var s=t(3673),a=t(2323);const r={class:"q-pa-sm"},i=(0,s._)("div",{class:"text-h5 q-pa-md"},"My Courses",-1),n={key:0,class:"text-center q-pt-xl"},c={key:1,style:{"padding-top":"68px"}},d={class:"text-overline"},l={class:"text-h5 text-primary q-mt-sm q-mb-xs"},u={class:"text-caption text-grey-100"};function p(e,o,t,p,k,m){const h=(0,s.up)("q-page-sticky"),g=(0,s.up)("q-spinner-hourglass"),w=(0,s.up)("q-card-section"),b=(0,s.up)("q-separator"),f=(0,s.up)("q-btn"),x=(0,s.up)("q-card-actions"),q=(0,s.up)("q-card");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(h,{position:"top-left",style:{"z-index":"1"}},{default:(0,s.w5)((()=>[i])),_:1}),e.coursesLoading?((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(g,{color:"primary",size:"2em"})])):((0,s.wg)(),(0,s.iD)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.courses,(o=>((0,s.wg)(),(0,s.j4)(q,{class:"course-card q-mb-md",bordered:"",flat:"",onClick:t=>e.gotoCourse(o),key:o.id,clickable:"",ripple:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"q-pt-xs"},{default:(0,s.w5)((()=>[(0,s._)("div",d,(0,a.zw)(o.course_code),1),(0,s._)("div",l,(0,a.zw)(o.title),1),(0,s._)("div",u,(0,a.zw)(o.description),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(b),(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{flat:"",round:"",icon:"event"}),(0,s.Wm)(f,{flat:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(o.period),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))]))])}var k=t(7874),m=t(2176),h=t(5474);const g=(e,o)=>{o(e)},w=(e,o)=>{o(e)},b=(e,o)=>new Promise(((t,s)=>{h.axios.post(`/api/bookmarks/${e}`,{bookmark:o}).then((e=>{g(e.data,t)})).catch((e=>{w(e.response.data,s)}))}));var f=t(1173);const x=({data:e},o)=>{f["default"].dispatch("fetchAllBookmarks",e),o(e)},q=(e,o)=>o(e),y=()=>new Promise(((e,o)=>{h.axios.get("/api/bookmarks").then((o=>{x(o,e)})).catch((e=>{q(e,o)}))})),C=(e,o)=>{y(),o(e)},_=(e,o)=>{o(e)},v=e=>new Promise(((o,t)=>{h.axios["delete"](`/api/bookmarks/${e}`).then((e=>{C(e.data,o)})).catch((e=>{_(e.response.data,t)}))})),L={all:y,bookmark:b,destroy:v};t(2130);const Z=(0,s.aZ)({name:"PageIndex",data(){return{tab:"mycourses",coursesLoading:!1,bookmarkLoading:!1}},computed:{...(0,k.Se)({courses:"allCourses",bookmarks:"allBookmarks"})},mounted(){this.coursesLoading=!0,m.Z.all().then((e=>{this.coursesLoading=!1})).catch((e=>{this.coursesLoading=!1}))},methods:{viewCourse(e){this.$router.push(`/course/${e.course_id}#section-${e.section_id}`)},deleteBookmark(e){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this bookmark?",cancel:!0,persistent:!0}).onOk((()=>{L.destroy(e).then((e=>{this.loading=!1})).catch((e=>{this.loading=!1}))}))},gotoCourse(e){f["default"].dispatch("setCurrentCourse",e),this.$router.push(`/courses/${e.id}`)}},watch:{tab(e){"bookmarks"===e&&(this.bookmarkLoading=!0,L.all().then((e=>{this.bookmarkLoading=!1})).catch((e=>{this.bookmarkLoading=!1})))}}});var W=t(1007),$=t(3282),z=t(151),Q=t(5589),P=t(5869),S=t(9367),B=t(2165),D=t(7518),A=t.n(D);Z.render=p;const H=Z;A()(Z,"components",{QPageSticky:W.Z,QSpinnerHourglass:$.Z,QCard:z.Z,QCardSection:Q.Z,QSeparator:P.Z,QCardActions:S.Z,QBtn:B.Z})}}]);