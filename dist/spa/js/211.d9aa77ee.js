"use strict";(self["webpackChunklearning_app"]=self["webpackChunklearning_app"]||[]).push([[211],{6211:(e,l,s)=>{s.r(l),s.d(l,{default:()=>q});var a=s(3673),t=s(2323);const i={class:"q-pa-md"},r={class:"text-h5 q-py-md"},o=(0,a._)("div",{class:"text-subtitle"},"Role",-1),u={class:"q-gutter-sm"},n={class:"row justify-center q-gutter-md q-pa-xs q-mt-md"};function d(e,l,s,d,m,h){const p=(0,a.up)("q-input"),c=(0,a.up)("q-radio"),f=(0,a.up)("q-btn"),_=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,(0,t.zw)(e.id?"Update":"Create")+" User",1),(0,a.Wm)(_,{onSubmit:e.onSubmit,class:"q-gutter-xs",style:{"max-width":"800px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{filled:"",modelValue:e.first_name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.first_name=l),label:"Firstname","lazy-rules":"",rules:[e=>e&&e.length>0||"Firstname is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(p,{filled:"",modelValue:e.last_name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.last_name=l),label:"Lastname","lazy-rules":"",rules:[e=>e&&e.length>0||"Lastname is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(p,{filled:"",modelValue:e.email,"onUpdate:modelValue":l[2]||(l[2]=l=>e.email=l),label:"Email","lazy-rules":"",rules:[e=>e&&e.length>0||"Email is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(p,{filled:"",modelValue:e.password,"onUpdate:modelValue":l[3]||(l[3]=l=>e.password=l),label:"Password"},null,8,["modelValue"]),(0,a.Wm)(p,{filled:"",modelValue:e.password_confirmation,"onUpdate:modelValue":l[4]||(l[4]=l=>e.password_confirmation=l),label:"Confirm Password","lazy-rules":"",rules:[l=>l==e.password||"Password doesn't match"]},null,8,["modelValue","rules"]),o,(0,a._)("div",u,[(0,a.Wm)(c,{modelValue:e.role,"onUpdate:modelValue":l[5]||(l[5]=l=>e.role=l),val:"teacher",label:"Teacher"},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:e.role,"onUpdate:modelValue":l[6]||(l[6]=l=>e.role=l),val:"student",label:"Student"},null,8,["modelValue"])]),(0,a._)("div",n,[(0,a.Wm)(f,{label:"Submit",type:"submit",color:"primary"}),(0,a.Wm)(f,{label:"Back",type:"submit",to:"/users"})])])),_:1},8,["onSubmit"])])}s(71);var m=s(5779),h=s(7874),p=s(1173);const c=(0,a.aZ)({name:"AdminUserForm",data(){return{id:"",first_name:"",last_name:"",email:"",role:"teacher",password:"",password_confirmation:""}},computed:{...(0,h.Se)({user:"currentUser",sections:"allUsers"})},mounted(){this.$route.params.id&&(this.loading=!0,m.Z.show(this.$route.params.id).then((e=>{p["default"].dispatch("setCurrentUser",e),this.loading=!1})).catch((e=>{this.loading=!1})))},methods:{onSubmit(){const e={first_name:this.first_name,last_name:this.last_name,email:this.email,role:this.role,password:this.password,password_confirmation:this.password_confirmation},l=this.id?m.Z.update(this.id,e):m.Z.store(e);Promise.all([l]).then((e=>{this.loading=!1,this.$q.dialog({message:this.id?`Successfully updated user ${this.user.first_name}.`:"Successfully created user!"}).onOk((()=>{this.id=null,this.first_name=null,this.last_name=null,this.email=null,this.role="teacher",this.$router.push("/users")}))})).catch((e=>{this.loading=!1}))},setValues(e){this.id=e.id,this.first_name=e.first_name,this.last_name=e.last_name,this.email=e.email,this.role=e.role}},watch:{user(e){e&&this.setValues(e)}}});var f=s(5269),_=s(4689),w=s(7991),V=s(2165),b=s(7518),g=s.n(b);c.render=d;const q=c;g()(c,"components",{QForm:f.Z,QInput:_.Z,QRadio:w.Z,QBtn:V.Z})}}]);