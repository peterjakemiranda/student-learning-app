"use strict";(self["webpackChunklearning_app"]=self["webpackChunklearning_app"]||[]).push([[277],{2577:(t,e,a)=>{a.d(e,{Z:()=>x});var s=a(5474);const i=(t,{data:e})=>{t(e)},n=(t,e)=>{e(t)},o=t=>new Promise(((e,a)=>{s.axios.request({url:"/api/courses",data:t,method:"post"}).then((t=>{i(e,t)})).catch((t=>{n(t.response.data,a)}))})),r=(t,e)=>{e(t)},c=(t,e)=>{e(t)},l=(t,e)=>new Promise(((a,i)=>{s.axios.request({url:`/api/courses/${t}`,data:e,method:"put"}).then((t=>{r(t.data,a)})).catch((t=>{c(t.response.data,i)}))}));var h=a(8938),d=a(5314),p=a(3305);const u=({data:t},e,a)=>{const s=t,i=d.Z.fetch(t.pagination);h["default"].dispatch("fetchCourses",{courses:s,pagination:i}),a({courses:s,pagination:i})},m=(t,e)=>e(t),g=(t={})=>new Promise(((e,a)=>{s.axios.get(p.Z.buildUrl("/api/courses",t)).then((a=>{u(a,t,e)})).catch((t=>{m(t,a)}))})),f=({data:t},e)=>{h["default"].dispatch("fetchAllCourses",t),e(t)},b=(t,e)=>e(t),$=(t=null)=>new Promise(((e,a)=>{s.axios.get(null===t?"/api/courses":`/api/courses?search=${t}`).then((t=>{f(t,e)})).catch((t=>{b(t,a)}))})),w=(t,e)=>{e(t)},v=(t,e)=>{e(t)},C=t=>new Promise(((e,a)=>{s.axios.get(`/api/courses/${t}`).then((t=>{w(t.data,e)})).catch((t=>{v(t.response.data,a)}))})),q=(t,e)=>{$(),e(t)},Z=(t,e)=>{e(t)},_=t=>new Promise(((e,a)=>{s.axios["delete"](`/api/courses/${t}`).then((t=>{q(t.data,e)})).catch((t=>{Z(t.response.data,a)}))})),x={store:o,update:l,items:g,all:$,show:C,destroy:_}},6523:(t,e,a)=>{a.d(e,{Z:()=>y});var s=a(5474);const i=(t,{data:e})=>{t(e)},n=(t,e)=>{e(t)},o=t=>new Promise(((e,a)=>{s.axios.request({url:"/api/sections",data:t,method:"post"}).then((t=>{i(e,t)})).catch((t=>{n(t.response.data,a)}))})),r=(t,e)=>{e(t)},c=(t,e)=>{e(t)},l=(t,e)=>new Promise(((a,i)=>{s.axios.request({url:`/api/sections/${t}`,data:e,method:"put"}).then((t=>{r(t.data,a)})).catch((t=>{c(t.response.data,i)}))}));var h=a(8938),d=a(5314),p=a(3305);const u=({data:t},e,a)=>{const s=t,i=d.Z.fetch(t.pagination);h["default"].dispatch("fetchSections",{sections:s,pagination:i}),a({sections:s,pagination:i})},m=(t,e)=>e(t),g=(t={})=>new Promise(((e,a)=>{s.axios.get(p.Z.buildUrl("/api/sections",t)).then((a=>{u(a,t,e)})).catch((t=>{m(t,a)}))})),f=({data:t},e)=>{h["default"].dispatch("fetchAllSections",t),e(t)},b=(t,e)=>e(t),$=(t=null)=>new Promise(((e,a)=>{s.axios.get(null===t?"/api/sections":`/api/sections?course_id=${t}`).then((t=>{f(t,e)})).catch((t=>{b(t,a)}))})),w=(t,e)=>{e(t)},v=(t,e)=>{e(t)},C=t=>new Promise(((e,a)=>{s.axios.get(`/api/sections/${t}`).then((t=>{w(t.data,e)})).catch((t=>{v(t.response.data,a)}))})),q=({data:t},e)=>{h["default"].dispatch("fetchSearchResults",t),e(t)},Z=(t,e)=>e(t),_=(t="")=>new Promise(((e,a)=>{s.axios.get(`/api/sections?search=${t}`).then((t=>{q(t,e)})).catch((t=>{Z(t,a)}))})),x=(t,e,a)=>{$(a),e(t)},P=(t,e)=>{e(t)},S=(t,e)=>new Promise(((a,i)=>{s.axios["delete"](`/api/sections/${t}`).then((t=>{x(t.data,a,e)})).catch((t=>{P(t.response.data,i)}))})),y={store:o,update:l,items:g,all:$,show:C,search:_,destroy:S}},5314:(t,e,a)=>{a.d(e,{Z:()=>i});class s{static fetchCollection(t){return t.map((t=>this.fetch(t)))}static sendCollection(t){return t.map((t=>this.send(t)))}}class i extends s{static fetch(t){return{currentPage:t.current_page,lastPage:t.last_page,limit:t.limit,totalCount:t.total_count,counters:t.counters}}static send(t){return{current_page:t.currentPage,last_page:t.lastPage,limit:t.limit,total_count:t.totalCount}}}},3305:(t,e,a)=>{a.d(e,{Z:()=>s});const s={buildUrl(t,e){let a="?";const s=Object.keys(e).filter((t=>e[t]));return s.forEach(((t,i)=>{a+=`${t}=${e[t]}`,i<s.length-1&&(a+="&")})),`${t}${a}`},debounce(t,e){var a=null;return function(){clearTimeout(a);var s=arguments,i=this;a=setTimeout((function(){t.apply(i,s)}),e)}}}},9277:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var s=a(3673),i=a(2323);const n={class:"q-pa-md"},o={class:"text-h5 q-py-md"},r={class:"q-gutter-lg q-pa-lg"};function c(t,e,a,c,l,h){const d=(0,s.up)("q-select"),p=(0,s.up)("q-input"),u=(0,s.up)("q-editor"),m=(0,s.up)("q-btn"),g=(0,s.up)("q-form");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",o,(0,i.zw)(t.id?"Update":"Create")+" Section",1),(0,s.Wm)(g,{onSubmit:t.onSubmit,onReset:t.onReset,class:"q-gutter-md",style:{"max-width":"800px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filled:"","map-options":"",modelValue:t.course,"onUpdate:modelValue":e[0]||(e[0]=e=>t.course=e),options:t.courseOptions,label:"Course"},null,8,["modelValue","options"]),(0,s.Wm)(p,{filled:"",modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=e=>t.title=e),label:"Title"},null,8,["modelValue"]),(0,s.Wm)(u,{toolbar:[["left","center","right","justify","bold","italic","underline","hr","link","quote","unordered","ordered","outdent","indent"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]}],["undo","redo"],["viewsource"]],modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=e=>t.content=e),filled:"",label:"Content *","lazy-rules":"",rules:[t=>t&&t.length>0||"Content is required"]},null,8,["toolbar","modelValue","rules"]),(0,s._)("div",r,[(0,s.Wm)(m,{label:"Submit",type:"submit",color:"primary"}),(0,s.Wm)(m,{label:"Back",type:"submit",to:`/admin/courses/${t.$route.params.course_id}/sections`},null,8,["to"])])])),_:1},8,["onSubmit","onReset"])])}var l=a(2577),h=a(6523),d=a(7874);const p=(0,s.aZ)({name:"AdminSectionForm",data(){return{id:"",title:"",content:"",course:""}},computed:{...(0,d.Se)({courses:"allCourses",sections:"allSections"}),courseOptions(){return this.courses.map((t=>({label:t.title,value:t.id})))}},mounted(){this.courses.length?this.setCurrentCourse():l.Z.all().then((t=>{this.loading=!1,this.setCurrentCourse()})).catch((t=>{this.loading=!1})),this.$route.params.id&&h.Z.show(this.$route.params.id).then((t=>{this.id=t.id,this.title=t.title,this.content=t.content,this.loading=!1})).catch((t=>{this.loading=!1}))},methods:{onSubmit(){this.id?this.update():this.save()},save(){h.Z.store({title:this.title,content:this.content,course_id:this.course.value}).then((t=>{this.loading=!1,this.$router.push(`/admin/courses/${this.$route.params.course_id}/sections`)})).catch((t=>{this.loading=!1}))},update(){h.Z.update(this.id,{title:this.title,content:this.content,course_id:this.course.value}).then((t=>{this.loading=!1,this.$router.push(`/admin/courses/${this.$route.params.course_id}/sections`)})).catch((t=>{this.loading=!1}))},setCurrentCourse(){this.course=this.courseOptions.find((t=>+t.value===+this.$route.params.course_id))},onReset(){}},watch:{courses(t){}}});var u=a(5269),m=a(7236),g=a(4842),f=a(9991),b=a(2165),$=a(7518),w=a.n($);p.render=c;const v=p;w()(p,"components",{QForm:u.Z,QSelect:m.Z,QInput:g.Z,QEditor:f.Z,QBtn:b.Z})}}]);